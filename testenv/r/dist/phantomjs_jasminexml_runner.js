var htmlrunner,resultdir,page,fs;phantom.injectJs("jasmine/lib/utils/core.js"),phantom.args.length!==2?(console.log("Usage: phantom_test_runner.js HTML_RUNNER RESULT_DIR"),phantom.exit()):(htmlrunner=phantom.args[0],resultdir=phantom.args[1],page=require("webpage").create(),fs=require("fs"),page.onConsoleMessage=function(e,t,n){console.log(e)},page.open(htmlrunner,function(e){e==="success"?utils.core.waitfor(function(){return page.evaluate(function(){return typeof jasmine.phantomjsXMLReporterPassed!="undefined"})},function(){var e=null,t,n;suitesResults=page.evaluate(function(){return jasmine.phantomjsXMLReporterResults});for(t=0,n=suitesResults.length;t<n;++t)try{e=fs.open(resultdir+"/"+suitesResults[t].xmlfilename,"w"),e.write(suitesResults[t].xmlbody),e.close()}catch(r){console.log(r),console.log("phantomjs> Unable to save result of Suite '"+suitesResults[t].xmlfilename+"'")}phantom.exit(page.evaluate(function(){return jasmine.phantomjsXMLReporterPassed?0:1}))},function(){phantom.exit(1)}):(console.log("phantomjs> Could not load '"+htmlrunner+"'."),phantom.exit(1))}));